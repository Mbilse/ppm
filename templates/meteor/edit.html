<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meteor - 编辑</title>
    <link rel="stylesheet" href="/lib/edit/edit.css">
    <link rel="stylesheet" href="/lib/booticon.css">
</head>

<body>
    <script src="/lib/jq.min.js"></script><script>
        file={{ file|safe }};
        pg={{ pgid|safe }};
        stylem={{ stylem|safe }};
        props={{ props|safe }};
        tags={{ tags|safe }};
        allanimtype={{ allanimtype|safe }};
        pgnum={{ pgnum|safe }};
    </script>
    <div id="mainpage">
        <div class="bar">
            <div id="bar">
                <img src="/lib/logo.svg" alt="Meteor" class="icon">
                <span class="meteor">Meteor</span>
                <div class="menu list">
                    <span class="item" onclick="showcm(this.offsetLeft+this.offsetWidth+15,this.offsetTop,this)">文件
                        <contextmenu>
                            <p onclick="window.location='/new'">新建</p>
                            <p onclick="$.get('/open').done(()=>{window.location='/edit/0'});">打开</p>
                            <p onclick="$.get('/save').done(()=>{alert('已保存')})">保存</p>
                        </contextmenu>
                    </span>
                    <span class="item" onclick="showcm(this.offsetLeft+this.offsetWidth+15,this.offsetTop,this)">编辑
                        <contextmenu>
                        <p onclick="pasteElement()" if="clipboard">粘贴到页面</p>
                        <p onclick="frame.selectAll()">全选</p>
                        <hr>
                        <p onclick="copyElement()" if="frame.selectedElements.length">复制</p>
                        <p onclick="copyElement();delEle()" if="frame.selectedElements.length">剪切</p>
                        </contextmenu>
                    </span>
                    <span class="item">帮助</span>
                </div>
                <div class="bottom list vb">
                    <span class="item main" onclick="window.open('/play','_blank')">
                        <svg viewBox="256 121 647 783" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                            <path d="M256,818L256,206C256,194.333 258.25,183.333 262.75,173C267.25,162.667 273.333,153.583 281,145.75C288.667,137.917 297.667,131.75 308,127.25C318.333,122.75 329.333,120.5 341,120.5C357.333,120.5 372.833,125.167 387.5,134.5L863.5,440C875.833,447.667 885.417,457.917 892.25,470.75C899.083,483.583 902.5,497.333 902.5,512C902.5,526.667 899.083,540.417 892.25,553.25C885.417,566.083 875.833,576.333 863.5,584L387.5,889.5C373.833,898.5 358.5,903 341.5,903C329.833,903 318.75,900.833 308.25,896.5C297.75,892.167 288.667,886.167 281,878.5C273.333,870.833 267.25,861.833 262.75,851.5C258.25,841.167 256,830 256,818ZM341.5,206L341.5,818L817,512Z" fill="#FFFFFF" fill-opacity="1">
                            </path>
                          </svg>播放</span>
                    <a class="item " href="/export" download="output.html" style="cursor: default;">
                        <svg viewBox="0 128 960 832" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <path d="M772,128C797,128 820.917,133.083 843.75,143.25C866.583,153.417 886.583,167.083 903.75,184.25C920.917,201.417 934.583,221.417 944.75,244.25C954.917,267.083 960,291 960,316L960,708C960,733 954.917,756.917 944.75,779.75C934.583,802.583 920.917,822.583 903.75,839.75C886.583,856.917 866.583,870.583 843.75,880.75C820.917,890.917 797,896 772,896L576,896L576,832L770.5,832C787.167,832 803.083,828.583 818.25,821.75C833.417,814.917 846.75,805.75 858.25,794.25C869.75,782.75 878.917,769.417 885.75,754.25C892.583,739.083 896,723.167 896,706.5L896,317.5C896,300.833 892.583,284.917 885.75,269.75C878.917,254.583 869.75,241.25 858.25,229.75C846.75,218.25 833.417,209.083 818.25,202.25C803.083,195.417 787.167,192 770.5,192L189.5,192C172.833,192 156.917,195.417 141.75,202.25C126.583,209.083 113.25,218.25 101.75,229.75C90.25,241.25 81.0833,254.583 74.25,269.75C67.4167,284.917 64,300.833 64,317.5L64,706.5C64,723.833 67.5,740.083 74.5,755.25C81.5,770.417 90.8333,783.667 102.5,795C114.167,806.333 127.75,815.333 143.25,822C158.75,828.667 175,832 192,832L384,832L384,896L188,896C163,896 139.083,890.917 116.25,880.75C93.4167,870.583 73.4167,856.917 56.25,839.75C39.0833,822.583 25.4167,802.583 15.25,779.75C5.08333,756.917 0,733 0,708L0,316C0,291 5.08333,267.083 15.25,244.25C25.4167,221.417 39.0833,201.417 56.25,184.25C73.4167,167.083 93.4167,153.417 116.25,143.25C139.083,133.083 163,128 188,128ZM512,493L512,928C512,936.667 508.833,944.167 502.5,950.5C496.167,956.833 488.667,960 480,960C471.333,960 463.833,956.833 457.5,950.5C451.167,944.167 448,936.667 448,928L448,493L310.5,630.5C304.167,636.833 296.667,640 288,640C279.333,640 271.833,636.833 265.5,630.5C259.167,624.167 256,616.667 256,608C256,599.333 259.167,591.833 265.5,585.5L456,395C459.667,391.333 463.333,388.583 467,386.75C470.667,384.917 475,384 480,384C485,384 489.333,384.917 493,386.75C496.667,388.583 500.333,391.333 504,395L694.5,585.5C700.833,591.833 704,599.333 704,608C704,616.667 700.833,624.167 694.5,630.5C688.167,636.833 680.667,640 672,640C663.333,640 655.833,636.833 649.5,630.5Z" fill="#000000" fill-opacity="1">
                        </path>
                      </svg>导出</a>
                    <span class="item" onclick="window.location='/';">
                        <svg viewBox="0 0 960 960"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                            <path d="M0,480C0,435.667 5.66667,393.083 17,352.25C28.3333,311.417 44.4167,273.167 65.25,237.5C86.0833,201.833 111.083,169.417 140.25,140.25C169.417,111.083 201.833,86.0834 237.5,65.25C273.167,44.4167 311.417,28.3334 352.25,17C393.083,5.66669 435.667,0 480,0C524.333,0 566.917,5.66669 607.75,17C648.583,28.3334 686.833,44.4167 722.5,65.25C758.167,86.0834 790.583,111.083 819.75,140.25C848.917,169.417 873.917,201.833 894.75,237.5C915.583,273.167 931.667,311.417 943,352.25C954.333,393.083 960,435.667 960,480C960,524.333 954.25,566.917 942.75,607.75C931.25,648.583 915.083,686.75 894.25,722.25C873.417,757.75 848.417,790.083 819.25,819.25C790.083,848.417 757.75,873.417 722.25,894.25C686.75,915.083 648.5,931.25 607.5,942.75C566.5,954.25 524,960 480,960C435.667,960 393,954.333 352,943C311,931.667 272.75,915.583 237.25,894.75C201.75,873.917 169.417,848.917 140.25,819.75C111.083,790.583 86.0833,758.25 65.25,722.75C44.4167,687.25 28.3333,649 17,608C5.66667,567 0,524.333 0,480ZM896,480C896,441.667 891.083,404.75 881.25,369.25C871.417,333.75 857.417,300.583 839.25,269.75C821.083,238.917 799.417,210.917 774.25,185.75C749.083,160.583 721.083,138.917 690.25,120.75C659.417,102.583 626.25,88.5834 590.75,78.75C555.25,68.9167 518.333,64.0001 480,64C441.667,64.0001 404.75,68.9167 369.25,78.75C333.75,88.5834 300.583,102.583 269.75,120.75C238.917,138.917 210.917,160.583 185.75,185.75C160.583,210.917 138.917,238.917 120.75,269.75C102.583,300.583 88.5833,333.75 78.75,369.25C68.9167,404.75 64,441.667 64,480C64,518.333 68.9167,555.25 78.75,590.75C88.5833,626.25 102.5,659.417 120.5,690.25C138.5,721.083 160.167,749.167 185.5,774.5C210.833,799.833 238.917,821.5 269.75,839.5C300.583,857.5 333.75,871.417 369.25,881.25C404.75,891.083 441.667,896 480,896C518.333,896 555.25,891.083 590.75,881.25C626.25,871.417 659.417,857.5 690.25,839.5C721.083,821.5 749.167,799.833 774.5,774.5C799.833,749.167 821.5,721.083 839.5,690.25C857.5,659.417 871.417,626.25 881.25,590.75C891.083,555.25 896,518.333 896,480ZM432,288C432,274.667 436.667,263.333 446,254C455.333,244.667 466.667,240 480,240C493.333,240 504.667,244.667 514,254C523.333,263.333 528,274.667 528,288C528,301.333 523.333,312.667 514,322C504.667,331.333 493.333,336 480,336C466.667,336 455.333,331.333 446,322C436.667,312.667 432,301.333 432,288ZM448,672L448,416C448,407.333 451.167,399.833 457.5,393.5C463.833,387.167 471.333,384 480,384C488.667,384 496.167,387.167 502.5,393.5C508.833,399.833 512,407.333 512,416L512,672C512,680.667 508.833,688.167 502.5,694.5C496.167,700.833 488.667,704 480,704C471.333,704 463.833,700.833 457.5,694.5C451.167,688.167 448,680.667 448,672Z" fill="#000000" fill-opacity="1">
                            </path>
                          </svg>
                        关于</span>
                </div>
            </div>
        </div>
        <div class="ctr">
            <div class="container">
                <iframe id="page" src="/render/{{ pgid }}" allowtransparency="true">

                </iframe>
            </div>
            <div id="toolbar">
                <div class="b sl">
                    <div class="a bt l" onclick="frame.selectAll()">
                        <i class="bi bi-check2-all"></i>
                        <span>全选</span>
                    </div>
                    <div class="a bt l select-then-enable" onclick="frame.clearSelection()">
                        <i class="bi bi-x-circle"></i>
                        <span>取消选择</span>
                    </div>
                    <div class="a bt l paste disabled" onclick="pasteElement()">
                        <i class="bi bi-clipboard"></i>
                        <span>粘贴到页面</span>
                    </div>
                </div>
                <div class="b ac select-then-enable">
                    <div class="a bt l" onclick="copyElement()">
                        <i class="bi bi-copy"></i>
                        <span>复制</span>
                    </div>
                    <div class="a bt l" onclick="copyElement(); delEle()">
                        <i class="bi bi-scissors"></i>
                        <span>剪切</span>
                    </div>
                    <div class="a bt l dl" onclick="delEle()">
                        <i class="bi bi-trash3"></i>
                        <span>删除</span>
                    </div>
                </div>
                <div class="b zoom">
                    <div class="a bt l mv" onclick="$('#zoompage').val(Number($('#zoompage').val())-5);zoompage($('#zoompage').val())">
                        <i class="bi bi-zoom-out"></i>
                    </div>
                    <input id="zoompage" type="range" min="20" max="120" step="2" value="100" oninput="zoompage(this.value);">
                    <div class="a bt l mv" onclick="$('#zoompage').val(Number($('#zoompage').val())+5);zoompage($('#zoompage').val())">
                        <i class="bi bi-zoom-in"></i>
                    </div>
                </div>
            </div>
            <div class="p1">
                <div id="pages">
                    <div class="list">

                    </div>
                    <div class="bottom">
                        <button onclick="addPage()"><i class="bi bi-plus"></i>添加页</button>
                    </div>
                </div>
                <div id="tools">
                    <div class="group big">
                        <div class="fun">
                            <div class="ts big" onclick="addEle('text')">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                    class="bi bi-textarea-t" viewBox="0 0 16 16">
                                    <path
                                        d="M1.5 2.5A1.5 1.5 0 0 1 3 1h10a1.5 1.5 0 0 1 1.5 1.5v3.563a2 2 0 0 1 0 3.874V13.5A1.5 1.5 0 0 1 13 15H3a1.5 1.5 0 0 1-1.5-1.5V9.937a2 2 0 0 1 0-3.874V2.5zm1 3.563a2 2 0 0 1 0 3.874V13.5a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5V9.937a2 2 0 0 1 0-3.874V2.5A.5.5 0 0 0 13 2H3a.5.5 0 0 0-.5.5v3.563zM2 7a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm12 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2z" />
                                    <path
                                        d="M11.434 4H4.566L4.5 5.994h.386c.21-1.252.612-1.446 2.173-1.495l.343-.011v6.343c0 .537-.116.665-1.049.748V12h3.294v-.421c-.938-.083-1.054-.21-1.054-.748V4.488l.348.01c1.56.05 1.963.244 2.173 1.496h.386L11.434 4z" />
                                </svg>
                                <span>文本</span>
                            </div>
                            <div class="ts big" onclick="addEle('rect')">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                    class="bi bi-bounding-box-circles" viewBox="0 0 16 16">
                                    <path
                                        d="M2 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zM0 2a2 2 0 0 1 3.937-.5h8.126A2 2 0 1 1 14.5 3.937v8.126a2 2 0 1 1-2.437 2.437H3.937A2 2 0 1 1 1.5 12.063V3.937A2 2 0 0 1 0 2zm2.5 1.937v8.126c.703.18 1.256.734 1.437 1.437h8.126a2.004 2.004 0 0 1 1.437-1.437V3.937A2.004 2.004 0 0 1 12.063 2.5H3.937A2.004 2.004 0 0 1 2.5 3.937zM14 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zM2 13a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm12 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2z" />
                                </svg>
                                <span>矩块</span>
                            </div>
                            <div class="ts big" onclick="uploadImage()">
                                <svg viewBox="64 64 896 896"  width="16" height="16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                    <path d="M252,832C227,832 203.083,826.917 180.25,816.75C157.417,806.583 137.417,792.917 120.25,775.75C103.083,758.583 89.4167,738.583 79.25,715.75C69.0833,692.917 64,669 64,644L64,252C64,227 69.0833,203.083 79.25,180.25C89.4167,157.417 103.083,137.417 120.25,120.25C137.417,103.083 157.417,89.4167 180.25,79.25C203.083,69.0834 227,64.0001 252,64L644,64C669,64.0001 692.917,69.0834 715.75,79.25C738.583,89.4167 758.583,103.083 775.75,120.25C792.917,137.417 806.583,157.417 816.75,180.25C826.917,203.083 832,227 832,252L832,644C832,669 826.917,692.917 816.75,715.75C806.583,738.583 792.917,758.583 775.75,775.75C758.583,792.917 738.583,806.583 715.75,816.75C692.917,826.917 669,832 644,832ZM448,456C465,456 481.333,459.25 497,465.75C512.667,472.25 526.5,481.5 538.5,493.5L750.5,705C756.167,695.333 760.5,684.917 763.5,673.75C766.5,662.583 768,651.333 768,640L768,253.5C768,236.833 764.583,220.917 757.75,205.75C750.917,190.583 741.75,177.25 730.25,165.75C718.75,154.25 705.417,145.083 690.25,138.25C675.083,131.417 659.167,128 642.5,128L253.5,128C236.833,128 220.917,131.417 205.75,138.25C190.583,145.083 177.25,154.25 165.75,165.75C154.25,177.25 145.083,190.583 138.25,205.75C131.417,220.917 128,236.833 128,253.5L128,640C128,651.333 129.5,662.583 132.5,673.75C135.5,684.917 139.833,695.333 145.5,705L357.5,493.5C369.5,481.5 383.333,472.25 399,465.75C414.667,459.25 431,456 448,456ZM544,288C544,279 545.667,270.667 549,263C552.333,255.333 556.917,248.583 562.75,242.75C568.583,236.917 575.333,232.333 583,229C590.667,225.667 599,224 608,224C616.667,224 624.917,225.667 632.75,229C640.583,232.333 647.417,236.917 653.25,242.75C659.083,248.583 663.667,255.417 667,263.25C670.333,271.083 672,279.333 672,288C672,297 670.333,305.333 667,313C663.667,320.667 659.083,327.417 653.25,333.25C647.417,339.083 640.667,343.667 633,347C625.333,350.333 617,352 608,352C599,352 590.583,350.333 582.75,347C574.917,343.667 568.167,339.167 562.5,333.5C556.833,327.833 552.333,321.083 549,313.25C545.667,305.417 544,297 544,288ZM384,960C356.667,960 330.5,954.5 305.5,943.5C280.5,932.5 259,916.667 241,896L675.5,896C705.833,896 734.417,890 761.25,878C788.083,866 811.5,849.75 831.5,829.25C851.5,808.75 867.25,785 878.75,758C890.25,731 896,702.333 896,672L896,241C916.667,259 932.5,280.5 943.5,305.5C954.5,330.5 960,356.667 960,384L960,672C960,711.667 952.417,749 937.25,784C922.083,819 901.5,849.5 875.5,875.5C849.5,901.5 819,922.083 784,937.25C749,952.417 711.667,960 672,960ZM640,768C651.333,768 662.583,766.5 673.75,763.5C684.917,760.5 695.333,756.167 705,750.5L493.5,538.5C480.833,525.833 465.667,519.5 448,519.5C430.333,519.5 415.167,525.833 402.5,538.5L191,750.5C200.667,756.167 211.083,760.5 222.25,763.5C233.417,766.5 244.667,768 256,768Z" fill="#000000" fill-opacity="1">
                                    </path>
                                  </svg>
                                <span>图像</span>
                            </div>
                        </div>
                        <span>常用元素</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="css">
            <div class="p1">
                <div id="prop">
                    <div class="title">元素属性</div>
                    <div class="props">
                    </div>
                </div>
                <div id="tags">
                    <div class="title">样式标签</div>
                    <!-- <p style="font-size: small;margin: 0;">点击以添加标签至选中元素。点击标签右部按钮以编辑标签样式。标签样式将用于所有设此标签之元素，但元素样式恒优先于标签样式。</p> -->
                    <div class="tag-list select-one-then-enable"></div>
                    <div class="tag-actions">
                        <button onclick="$('#addtag').show();">添加</button>
                        <button class="disabled" onclick="manageTag()">管理</button>
                    </div>
                </div>
            </div>
            <div id="sti">
                <a class="a sty show" onclick="$('#stic>.show,#sti>.show').removeClass('show');$('#stic>#sty,#sti>.sty').addClass('show');">样式</a>
                <a class="a animation" onclick="$('#stic>.show,#sti>.show').removeClass('show');$('#stic>#animation,#sti>.animation').addClass('show');">动画</a>
                <!-- <a class="a sty show" onclick="$('#stic>.show,#sti>.show').removeClass('show');$('#stic>#sty,#sti>.sty').addClass('show');">关键帧动画</a> -->
            </div>
            <div class="page-container" id="stic">
                <div id="sty" class="page show">
                    <!-- 样式表 -->
                </div>
                <div id="animation" class="page">
                    <div class="animation-panel">
                        <div class="timeline">
                            <div class="onload">
                                <span style="font-size:20px">页面进入</span>
                                <div class="animation-list list"></div>
                            </div>
                            <div class="onclick">
                                <span style="font-size:20px">单击触发
                                <button onclick="addTimeNode()"><i class="bi bi-plus"></i>添加节点</button></span>
                                <div class="nodes"></div>
                            </div>
                        </div>
                        <div class="animation-editor">
                            <div class="no-selection">
                                择取动画以编辑
                            </div>
                            <div class="editor">
                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="modals">
        <div id="addstyle" class="modal">
            <div class="tit">
                <span class="key"></span>
                <span class="key2"></span>
            </div>
            <div class="body">
                <div class="value"></div>
            </div>
            <div class="buttons">
                <button class="ok">确定</button>
                <button onclick="$('.modal').hide()" class="cancel">取消</button>
            </div>
        </div>
        <div id="addtag" class="modal">
            <span class="tit">添加标签</span>
            <div class="body">
                <input type="text" class="tag" />
            </div>
            <div class="buttons">
                <button class="ok" onclick="addNewTag($('#addtag>.body>.tag').val())">确定</button>
                <button onclick="$('.modal').hide()" class="cancel">取消</button>
            </div>
        </div>
        <div id="addAnimation" class="modal">
            <div class="tit">添加动画</div>
            <div class="body">

            </div>
            <div class="buttons">
                <!-- <button class="ok" onclick="addNewAnimation()">确定</button> -->
                <button onclick="$('.modal').hide()" class="cancel">取消</button>
            </div>
        </div>
    </div>
    <div id="selectmenu"></div>
    <div id="contextmenu"></div>
    <script src="/lib/edit/edit.js"></script>
    <!-- <script>
        gotopage(0);
    </script> -->
</body>

</html>